# entrance-task-1

Изначально проект не запускался из-за ошибки. Я загуглил =) и после пары ссылок понял, что дело в отсутствии config файла. Я примерно представлял где он должен находится, но во избежания других подобных ошибок, я запустил команду по типу init (забыл), о которой я узнал из документации sequelize. Она указала мне на отсуствии конфига и создала его, но я получил информацию о том, что остальная структура в порядке.

Запустив проект, я не мог перейти по ссылке http://localhost:3000/graphql/, но посколько в консоли была 404 ошибка я сразу подумал про путь. И да, там была ошибка, кажется вместо q была g. 

После чего я перешел к проверке запросов. Сначала я начал проверять запросы типа getAll. events работали хорошо, а другие нет, и это было понятно по коду - вместо единого формата они написаны по разному. Некоторый пропускали значения, а некоторые не обрабатывали параметры. Возможно, в таком коде была необходимость, но мне его поведение показалось некорректным, и я привел все запросы к наиболее общему виду, как было изначально у events.

Далее я перешел к мутициям. К этому времени я уже понял как идет поток данных, и быстрее было находить ошибки сразу в коде, нежели получать их тестированием. Запросы очень похожи на linq в c#, с которым я долго работал, и мне было несложно понять что происходит. Быстро я понял, что рецепт хорошей мутации - наличие return и ассинхронное выполнение команд с испозованием промиссом. Еще отсутствовала одна мутиция, я ее добавил. 

Также я добавил мутицию updateEventExtended, которая обновляет эвент, получая сразу всю новую информацию, включая новый номер комнаты и список участников. Видимо, предлолагалось добавлять их все отдельно, но, как мне кажется, graphql поощряет обобщения вместо многих частных случаев. К тому же, эта мутация атомарна по своей сути, и нельзя назвать ее лишней или перегруженный параметрами.

Для работы под 3 заданием я добавил поддержку cors в проект, и перенес работу на 4000 порт, как часто видел в мануалах, а frontend у меня был на 3000. 

C точки зрения архитектуры я особых изменений не проиводил. Мне бы хотелось разделить в папке graphql файлы на поддиректории /mutations /queries и другие, но файлов и так очень мало, мне показалось, что это только затруднит чтение, но может быть сделано в дальнейшей при перспективе расширения.

Также мне не очень понравилось название поля login у юзера, хотя по макету там скорее всего будет имя. Но это относится к изменениям API, что бы я не хотел делать без согласования и склонен думать, что раз так назвали значит так было нужно.

# Приложение для создания и редактирования информации о встречах сотрудников

Написано для Node.js 8 и использует библиотеки:
* express
* sequelize
* graphql

## Задание
Код содержит ошибки разной степени критичности. Некоторых из них стилистические, а некоторые даже не позволят вам запустить приложение. Вам необходимо найти и исправить их.

Пункты для самопроверки:
1. Приложение должно успешно запускаться
2. Должно открываться GraphQL IDE - http://localhost:3000/graphql/
3. Все запросы на получение или изменения данных через graphql должны работать корректно. Все возможные запросы можно посмотреть в вкладке Docs в GraphQL IDE или в схеме (typeDefs.js)
4. Не должно быть лишнего кода
5. Все должно быть в едином codestyle

## Запуск
```
npm i
npm run dev
```

Для сброса данных в базе:
```
npm run reset-db
```
